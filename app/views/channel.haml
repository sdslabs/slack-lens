%div{:class => 'container-fluid custom-fluid'}
  %div{:class => 'row custom-row'}
    / left panel : channels, user, user-setting
    =haml :left, :locals => locals, :layout => false
    / middle-panel : messages related data
    =haml :middle, :locals => locals, :layout => false
    / right panel : search related
    =haml :right, :locals => locals, :layout => false

/ js things
:javascript

  /* scrollbar on message-box and search results */

  $(function(){
    $('.message-box').slimScroll({
      height: $('.message-box').height() + 'px'
    });

    $('.channel-search-result').slimScroll({
      height: $('.channel-search-result').height() + 'px'
    });
  });

  /* search channel */

  var form = $('form.search-channel');
  var channel = form.attr('data-channel');

  form.submit(function(e){
    e.preventDefault();

    var input = $('.search-channel input');
    var keyword = input.val();

    $.get('/search/' + channel, {keyword: keyword}, function(data){
      $('.channel-search-result').html(data);
    });
  });
